{% extends "base.html" %}
{% block content %}
  <h1 style="margin:0 0 16px 0;">Матрица: Критерии × Сотрудники</h1>
  {% if not employees or not criteria %}
    <div class="card">Нет данных для отображения. Загрузите сид-данные или добавьте сотрудников/критерии.</div>
  {% else %}
    <div class="card" style="overflow:auto;">
      <table style="width:100%; border-collapse:collapse;">
        <thead>
          <tr>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border);">Критерий</th>
            {% for emp in employees %}
              <th style="text-align:center; padding:8px; border-bottom:1px solid var(--border); white-space:nowrap;">{{ emp.full_name }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for cr in criteria %}
            <tr>
              <td style="padding:8px; border-bottom:1px solid var(--border);">{{ cr.name }}</td>
              {% for emp in employees %}
                {% set val = (matrix.get(cr.id, {}).get(emp.id) if matrix else None) %}
                <td style="text-align:center; padding:8px; border-bottom:1px solid var(--border);">
                  {% if val is not none %}{{ (val * 100)|round(0) }}%{% else %}—{% endif %}
                </td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}
{% endblock %}
